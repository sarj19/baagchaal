"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[218],{7005:function(e,n,t){t.r(n),t.d(n,{default:function(){return he}});var r=t(9439),i=(t(309),t(2791)),o=t(3733),a=t(4123),s=t(4881);function u(e){var n=e/10,t=e-n;return{padding:n,spacing:(e-2*n)/4,start:n,end:t,midPoint:(n+t)/2}}function l(e,n,t){var r=u(Math.min(t.getBoundingClientRect().width,t.getBoundingClientRect().height)),i=r.padding,o=r.spacing,a=.48*o*(.48*o),s=e-t.offsetLeft,l=n-t.offsetTop,c=Math.round((s-s%o)/o),d=Math.round((l-l%o)/o),f=i+c*o,g=i+d*o;return(f-s)*(f-s)+(g-l)*(g-l)<a?5*d+c:null}var c=t(9720),d=t.p+"static/media/board.0ac177ee3a40ac22f923.png",f=t(184);function g(e){var n=e.width,t=e.height,a=(0,i.useRef)(null),u=(0,s.Z)(),g=(0,r.Z)(u,2),A=g[0],v=g[1],m=(0,o.Z)(),p=(0,r.Z)(m,2),h=p[0];p[1];return(0,i.useEffect)((function(){if(!(0,c.e2)(h)){var e=a.current.parentElement,n=function(n){if((0,c.Du)(A,h.designation)){n.preventDefault();var t=l(n.clientX,n.clientY,e);v(null==t?{type:"select",value:t}:{type:"move",value:t})}},t=function(n){if((0,c.Du)(A,h.designation)){var t=n.changedTouches.item(0);if(null==t)return null;var r=l(t.clientX,t.clientY,e);v(null==r?{type:"select",value:r}:{type:"move",value:r})}},r=function(n){if((0,c.Du)(A,h.designation)){var t=l(n.clientX,n.clientY,e);null==A.selectedPiece||null==t?v({type:"select",value:t}):v({type:"move",value:t})}else v({type:"selected_without_turn"})};return e.addEventListener("click",r),e.addEventListener("mouseup",n),e.addEventListener("dragend",n),e.addEventListener("touchend",t),function(){e.removeEventListener("click",r),e.removeEventListener("mouseup",n),e.removeEventListener("dragend",n),e.removeEventListener("touchend",t)}}}),[a.current,A.moves,h.designation]),(0,f.jsx)("img",{alt:"board",ref:a,src:d,height:t,width:n})}var A=t(1087);function v(){var e=(0,o.Z)()[0];if(!(0,c.e2)(e))return(0,f.jsx)(f.Fragment,{});var n=e.winner,t=e.designation,r=e.gameType,i="".concat(n," won");return"self"==r||(t==n?i="You won!":t!=n&&(i="You lost!")),(0,f.jsxs)("div",{className:"boardOverlayContainer",children:[(0,f.jsx)("div",{children:i}),(0,f.jsx)(A.rU,{to:"/",replace:!0,children:(0,f.jsx)("button",{className:"pill playNewGameButton",children:" Play new game "})})]})}function m(){var e=(0,o.Z)(),n=(0,r.Z)(e,2),t=n[0].showLeaveGame,i=n[1];return t?(0,f.jsxs)("div",{className:"boardOverlayContainer",children:[(0,f.jsx)("div",{children:"Are you sure?"}),(0,f.jsx)(A.rU,{to:"/",replace:!0,className:"pill leaveGameConfirmation",children:"Yes"}),(0,f.jsx)("a",{className:"pill leaveGameConfirmation",onClick:function(){i({type:"leave_game",value:!1})},children:"No"})]}):(0,f.jsx)(f.Fragment,{})}function p(){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(v,{}),(0,f.jsx)(m,{})]})}var h=t(2387),x=t(2568),y=t(3920);var j=t(1413),E=5;function Z(e){var n=e.element;return i.cloneElement(n,{style:(0,j.Z)((0,j.Z)({},n.props.style),{},{marginLeft:n.props.style.marginLeft-E,marginTop:n.props.style.marginTop-E,width:n.props.style.width+2*E,height:n.props.style.height+2*E,filter:"opacity(0.4) blur(2px) grayscale(1)"})})}var w=t(2653),C=5;function b(e){var n=e.element;return i.cloneElement(n,{style:(0,j.Z)((0,j.Z)({},n.props.style),{},{marginLeft:n.props.style.marginLeft-C,marginTop:n.props.style.marginTop-C,width:n.props.style.width+2*C,height:n.props.style.height+2*C,filter:"drop-shadow(0px 0px 12px yellow)"})})}var B=t(3144),L=t(5671),N=(0,B.Z)((function e(n,t){(0,L.Z)(this,e),this.x=void 0,this.y=void 0,this.x=n,this.y=t}));function R(e,n,t,o){var a=(0,i.useState)(!1),s=(0,r.Z)(a,2),l=s[0],c=s[1],d=(0,i.useState)(null),f=(0,r.Z)(d,2),g=f[0],A=f[1],v=Math.floor(o/5),m=o-5*v,p=(0,i.useMemo)((function(){return u(t)}),[t]),h=p.padding,x=p.spacing;if((0,i.useEffect)((function(){var n,t=null===(n=e.current)||void 0===n?void 0:n.parentElement;if(null!=t&&l){var r=function(e){c(!1),e.preventDefault()},i=function(e){l&&(e.preventDefault(),A(new N(e.x,e.y)))},o=function(e){if(l){e.preventDefault();var n=e.touches.item(0);null!=n&&A(new N(n.clientX,n.clientY))}};return t.addEventListener("mouseup",r),t.addEventListener("dragend",r),t.addEventListener("touchend",r),t.addEventListener("drag",i),t.addEventListener("mousemove",i),t.addEventListener("touchmove",o,{passive:!1}),function(){t.removeEventListener("mouseup",r),t.removeEventListener("dragend",r),t.removeEventListener("touchend",r),t.removeEventListener("drag",i),t.removeEventListener("mousemove",i),t.removeEventListener("touchmove",o),A(null)}}}),[l,e.current]),l&&g){var y,j,E,Z,w=null===(y=e.current)||void 0===y||null===(j=y.parentElement)||void 0===j?void 0:j.getBoundingClientRect().left,C=null===(E=e.current)||void 0===E||null===(Z=E.parentElement)||void 0===Z?void 0:Z.getBoundingClientRect().top;return[g.x-n/2-(null==w?0:w),g.y-n/2-(null==C?0:C),c]}return[h+m*x-n/2,h+v*x-n/2,c]}function S(e){var n=e.boardSize,t=e.position,a=e.selected,u=e.type,l=(0,s.Z)(),d=(0,r.Z)(l,2),g=d[0],A=d[1],v=(0,o.Z)()[0],m=a?90:70,p=(0,i.useRef)(null),h=R(p,m,n,t),x=(0,r.Z)(h,3),y=x[0],j=x[1],E=x[2],C=(0,f.jsx)(w.Z,{ref:p,onMouseDown:function(e){(0,c.e2)(v)||(0,c.Du)(g,v.designation)&&(E(!0),e.preventDefault(),A({type:"select",value:t}))},onClick:function(){(0,c.e2)(v)||((0,c.Du)(g,v.designation)?null==g.selectedPiece||null==t?A({type:"select",value:t}):A({type:"move",value:t}):A({type:"selected_without_turn"}))},style:{marginLeft:y,marginTop:j,width:m,height:m}});return"highlight"===u?(0,f.jsx)(b,{element:C}):"gray"===u?(0,f.jsx)(Z,{element:C}):C}var D=t(4266);function U(e){var n=e.boardSize,t=e.position,a=e.selected,u=e.highlight,l=(0,s.Z)(),d=(0,r.Z)(l,2),g=d[0],A=d[1],v=(0,o.Z)()[0],m=a?90:70,p=(0,i.useRef)(null),h=R(p,m,n,t),x=(0,r.Z)(h,3),y=x[0],j=x[1],E=x[2],Z=function(e){e.preventDefault(),(0,c.e2)(v)||((0,c.Du)(g,v.designation)?(E(!0),A({type:"select",value:t})):E(!1))},w=(0,f.jsx)(D.Z,{ref:p,onMouseDown:Z,onTouchStart:Z,onClick:function(){(0,c.e2)(v)||((0,c.Du)(g,v.designation)?null==g.selectedPiece||null==t?A({type:"select",value:t}):A({type:"move",value:t}):A({type:"selected_without_turn"}))},style:{marginLeft:y,marginTop:j,width:m,height:m}});return u?(0,f.jsx)(b,{element:w}):w}function F(e){var n=e.boardSize,t=(0,s.Z)(),i=(0,r.Z)(t,2),a=i[0],u=(i[1],(0,o.Z)()),l=(0,r.Z)(u,2),d=l[0],g=(l[1],function(e,n){var t=n.hint,r=n.designation,i=new Set,o=[];return!0===t&&(0,c.Du)(e,r)&&((0,c.Du)(e,"goat")?(0,x.f)(e)?e.goats.forEach((function(n){y.AU[n].forEach((function(t){e.goats.includes(t)||e.tigers.includes(t)||i.add(n)}))})):o=y.Aq.filter((function(n){return!e.goats.includes(n)&&!e.tigers.includes(n)})):(0,c.Du)(e,"tiger")&&e.tigers.forEach((function(n){y.AU[n].forEach((function(t){e.goats.includes(t)?(0,h.V)(e.tigers,e.goats,n,t)&&i.add(n):e.tigers.includes(t)||i.add(n)}))}))),[i,o]}(a,d)),A=(0,r.Z)(g,2),v=A[0];A[1];return(0,f.jsxs)(f.Fragment,{children:[a.tigers.map((function(e){return(0,f.jsx)(U,{boardSize:n,position:e,selected:e==a.selectedPiece,highlight:v.has(e)},e)})),a.goats.map((function(e){return(0,f.jsx)(S,{boardSize:n,position:e,selected:e==a.selectedPiece,type:v.has(e)?"highlight":"default"},e)})),null!=a.selectedPiece&&(0,c.Du)(a,"goat")&&!a.goats.includes(a.selectedPiece)?(0,f.jsx)(S,{boardSize:n,position:a.selectedPiece,selected:!1,type:"gray"},a.selectedPiece):null]})}var Q=t(8137),k=t(738),z=t(4867);function M(e){var n=e.boardSize,t=(0,s.Z)(),i=(0,r.Z)(t,2),a=i[0],u=(i[1],(0,o.Z)()),l=(0,r.Z)(u,2),d=l[0],g=(l[1],d.botLevel?d.botLevel:2);return(0,c.Du)(a,"goat")&&(0,x.f)(a)?(0,f.jsx)(f.Fragment,{children:a.goats.map((function(e){var t=(0,z.jf)(e,a),i=t.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],o=(0,Q.G)(a,{type:"move_directly",from:t,to:i});return(0,k.F)(o,g)}));return(0,f.jsx)(I,{boardSize:n,position:e,children:t.map((function(e,n){return(0,f.jsxs)(f.Fragment,{children:[e[1]," -> ",-i[n],(0,f.jsx)("br",{})]})}))},e)}))}):(0,c.Du)(a,"goat")?(0,f.jsx)(f.Fragment,{children:y.Aq.filter((function(e){return(0,y.W)(e,a.goats,a.tigers)})).map((function(e){var t=(0,Q.G)(a,{type:"move_directly",from:e,to:e}),r=(0,k.F)(t,g);return(0,f.jsx)(I,{boardSize:n,position:e,children:-r},e)}))}):(0,f.jsx)(f.Fragment,{children:a.tigers.map((function(e){var t=(0,z.hI)(e,a.tigers,a.goats),i=t.map((function(e){var n=(0,r.Z)(e,2),t=n[0],i=n[1],o=(0,Q.G)(a,{type:"move_directly",from:t,to:i});return(0,k.F)(o,g)}));return(0,f.jsx)(I,{boardSize:n,position:e,children:t.map((function(e,n){return(0,f.jsxs)(f.Fragment,{children:[e[1]," -> ",i[n],(0,f.jsx)("br",{})]})}))},e)}))})}function I(e){var n=e.boardSize,t=e.position,r=e.children,o=Math.floor(t/5),a=t-5*o,s=(0,i.useMemo)((function(){return u(n)}),[n]),l=s.padding,c=s.spacing,d=l+a*c,g=l+o*c;return(0,f.jsx)("div",{style:{marginLeft:d,marginTop:g,position:"absolute",backgroundColor:"black"},children:r})}function V(e){var n=e.boardSize,t=(0,o.Z)()[0].debug;return(0,f.jsxs)("div",{className:"boardContainer",style:{width:n,height:n},children:[(0,f.jsx)(g,{width:n,height:n}),(0,f.jsx)(F,{boardSize:n}),t&&(0,f.jsx)(M,{boardSize:n}),(0,f.jsx)(p,{})]})}function T(e,n,r){if(0!=n){var i=new Worker(new URL(t.p+t.u(738),t.b));i.onmessage=function(e){r(e.data)},i.postMessage({type:"best_bot_move",state:e,level:n})}else r(function(e){var n;return 0==(n="tiger"==(0,c.yf)(e)?(0,z.ci)(e):(0,z.YR)(e)).length?null:n[Math.floor(Math.random()*n.length)]}(e))}function Y(e){var n=e.boardSize,t=(0,s.Z)(),u=(0,r.Z)(t,2),l=u[0],d=u[1],g=(0,o.Z)(),A=(0,r.Z)(g,2),v=A[0],m=A[1],p=v.userId,h=v.gameHash,x=v.gameType,y=v.designation,j=v.botLevel,E=(0,i.useRef)((0,c.yf)(l)),Z=(0,i.useRef)(null);return(0,i.useEffect)((function(){if("p2p_internet"==x){var e=(0,a.io)({auth:{token:h}}).onAny((function(e,n){console.log("received",e,n)})).onAnyOutgoing((function(e,n){console.log("sending",e,n)})).on("connect_error",(function(e){console.log("connect_error due to ".concat(e.message))})).on("movepiece",(function(e){e.gameHash==h&&(E.current="goat"==(0,c.yf)(l)?"tiger":"goat",d({type:"server",value:e.moves}))})).once("opponentJoined",(function(e){m({type:"set_opponent",opponentId:e})})).emit("gamejoined",{userId:p,gameHash:h});return Z.current=e,function(){e.disconnect()}}}),[x,h]),(0,i.useEffect)((function(){if(!(0,c.e2)(v))if("p2p_internet"==x){if(E.current==(0,c.yf)(l))return;E.current=(0,c.yf)(l);try{Z.current.emit("movepiece",{userId:p,gameHash:h,moves:l.moves})}catch(e){}}else if("bot"==x){if((0,c.yf)(l)==y||null==y||null==l)return;d({type:"bot_thinking"}),T(l,j||2,(function(e){if(null!=e){var n=(0,r.Z)(e,2),t=n[0],i=n[1];d({type:"select",value:t}),setTimeout((function(){d({type:"move",value:i})}),1e3)}}))}else"self"==x&&m({type:"designate",value:(0,c.yf)(l)})}),[l.moves,x]),(0,f.jsx)(V,{boardSize:n})}function H(){var e=(0,o.Z)()[0],n=(0,s.Z)()[0],t=(0,i.useRef)(n),r=(0,i.useRef)(e);return(0,i.useEffect)((function(){if(console.debug("=======DEBUG=======","turn",(0,c.yf)(n)),r.current!=e){for(var i in e)e[i]!=r.current[i]&&console.debug(i,e[i]);r.current=e}if(t.current!=n){for(var o in n)n[o]!=t.current[o]&&("moves"==o?console.debug(o,n[o].slice(t.current[o].length).reduce((function(e,n){return"".concat(e," [").concat(n[0]," => ").concat(n[1],"]")}),"...")):console.debug(o,n[o]));t.current=n}}),[e,n]),(0,f.jsx)(f.Fragment,{})}t(396);var O=t(4974);function q(){var e=(0,s.Z)(),n=(0,r.Z)(e,2),t=n[0];n[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"goatCountContainer pill",children:["Goat Left ",O.b-(0,x.V)(t)]}),(0,f.jsxs)("div",{className:"goatCountContainer pill",children:["Goat Eaten ",(0,x.V)(t)-t.goats.length]})]})}var X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAARCAYAAAAL4VbbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFWSURBVHgBlVHBbcJAENxd40fIhw7iSCCB8+EZQR6mA1JBoANSAbiCpAOcCqADHClE+fEjSPBwB/iN7dvsWbJy4ASJkay7uRmfZucQDDj3TaeCVh+Qa8AYp5zNo69NVOiYmzynZidXM6EelBEkmfL1T6SZfaiuxNhmBF+E2+1yjZasmos8sC1a6Aux3m2NEPCFUfV2H5vw9Nr6Q9NDpgUz+Njo3q0YVLxbfvfgH4hnAcCOxOC2DPMOZ8DMWtdmiBlk+jNAhBvtI8XwRohPura/jM38HPuynZOt1GveiEUzPbFp1Dwjkrwq1vXRRvqTJh5Fa1cO1ZFptpPrsbyEw8hD83Fk4lbQ6Lp7OGrB3cs3LXil2FgZTzLi8Cgwq+dEQVgy5xqQU++4k1+uoaBkzgg8qWgMJ7AJIlkCuBRokkbHHcjJ1Mg13H6ug1IMDUupMCXyC54KN/UfKNuIgWC6FJ4AAAAASUVORK5CYII=";function J(e){var n=e.fixed,t=(0,o.Z)(),i=(0,r.Z)(t,2),a=i[0],s=i[1];return(0,f.jsx)("button",{className:a.hint?"pill activePill":"pill",onClick:function(){return s({type:a.hint?"nohint":"hint"})},children:n?(0,f.jsx)("img",{alt:"hint",src:X}):"Hint"})}var P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACnSURBVHgBzZRBDoMgEEVnCFfBNKxc42GanqT2Jhymde2KNKFnkTqJCzNRdJSFP5lkFvD48CegaWyCDcVPwK01CgpJS07NqZgjMahy9kl1CmScqRNCS8VhIlDsYg9peFDPYeKrxe7rl2B6bcOe+ZrByqQ2KMBVR7m5qprbPYHyk6PX7x1aefwLEOq1BGKcrceH8xxCEsYfegJwiNgRiQMOOcoJL/cf/QHMsUm1hKEuAQAAAABJRU5ErkJggg==";function G(e){var n=e.fixed,t=(0,o.Z)()[1];return(0,f.jsx)("button",{className:"pill",onClick:function(){t({type:"leave_game",value:!0})},children:n?(0,f.jsx)("img",{alt:"leave",src:P}):"Leave Game"})}var K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALkSURBVHgBnVVNTttQEH4zjivEKjfAqKCmdIHZ0RYJ5wRwA8IJSE5AcgKSExRO0OYEeAGhuzqbhCpBdU/QdANSnLzpzHt2cILwoiNFEz/PzJvvmx+DKpDKfsWbIdZWz2dvHttxGE9e8yupApk7eA5K1V44TddFNV/zQ1UkpAJRmqhDpFqaVEeeAdRJkRtkfwSqRrjQoGIg6LPnLket8y8e3Q43M7vtzzt/WJVRU0MDTAhoFxSUE/exkVFSykNldQyLqyjNllrLyVOLg1xIAtYUMkp+Z5RAliUH/WWcOAPO8pAhchb6anxzH67C2/5UqZHCI7FhSv4iqDM5T+Z6M/5+H0MK6Qcrn0C1xjeDZj6AF3hld7p+zHl7RBQ93A2/rV7y9mCnjSSBKWSqqrC1XwnAwev8Tc8Z7ficNb+jci5GzHbVvF0eqZomezhbW4uYN2PgWl4Xhqy+SkDmMZTqp3Ye210LArWoB3xJGY8Tx5lgHEYTR1OVT6Ryta2DSmAMEQNm3GPY0ZghjXuD5qgnXQChBHaYkhRNjc8CE3BOBoHp03uBoqlrLtNoggqH9nLVzfPHPdsXDen7zI4IrjJKcAEV8ch4oQ5tMDI9B0CH+aDscGRfU2S0Y7UMhGcpU2BIRi4UQ9VAnYebYV1eeIFfdpOpkC/cRcxp115goS4PxAcpZmCK6D7u4RznZQloeCw9NTND4ZqxVdPi+JzJeZ67fPaKpo30n1earfk46o2ilHyZinredtQbRKaIpE9t9dVp4j7t5dvJCLhnKb+RDItpfqk4kO1V0tAA5HkmaSXocuBLtSJpb5+k9n22NyO7NFEiz1OxLLI4ft4N29nzu4/vz3ju2+qlXI5uB6cGcXYyL71pQpLsEuk+Kog0Kl8u4QBy0SIIb6a61dThCyOtwOelsjHTerF4QBVItuZkn7LjhIu1oczSXq7+qhRuft5AV7KBEGCFFlvY/wrqat3mb9SLbxFDvSzy+wcfZoFMupqVTgAAAABJRU5ErkJggg==";function W(e){var n=e.fixed;return(0,f.jsx)("button",{className:"pill",disabled:!0,children:n?(0,f.jsx)("img",{alt:"options",src:K}):"Options"})}var _="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHlSURBVHgBtVO9TttQFD7nOm4HJBopIqoalbpNLDnuUDNUipxIDU9AHyE8QTJ2a/IEpFNHMsIGTwADQrDBRAZQPCEmMAM/wvE9nOvEkmMCZOGTfO177rnf+fuMkEKpYtVBwxUk/A0Ixth8pJ4glB3voO+l76BazKo9CPTbJT2Y+wtADUL4NxzKXnzBdG2HiOqI0AQUW4F+0/F2PT9NQqNodBzod62kQxJG3clqw4e2IPjFQZcn/BRJsVbuwowwq+WeWf2+Fu/F+O0LwqYiM12rETn+NB2jYhnTSAL9fUuVXapx/+JynkRy7QafrI+3vWkNLbl2m4CyZ/snLTGNhBtkJLYNXRMDznI9mVlGyp5AXInKUZOB2aDIduJNf5SZEZHAZNRXQFOtgu3eV7f8BV6Gz9rp8PiXYoPpmg6MRMilAWxrgKv83Y4dEKQ3HpwfCS9z201rhyijxBeRgBoT9+XKqBvZpJOyp20xlJ0nOJiQQLFmd1X3YUYooSXFqanlw7fCgSbDP7nFvDVfnDv0Pf/+uQwWCp/+czGVoX63GvtFJL53cT9fLGwihcuZUF/LfV64zn3MwuX55UV0mdPOL+abQr7bkEiHiuDJD5iExRdCDVmN+IMPncjIE5RA2yho63SvvwtvgUcMZcB20fXM2wAAAABJRU5ErkJggg==";function $(e){var n=e.fixed;return(0,f.jsx)("button",{className:"pill",disabled:!0,children:n?(0,f.jsx)("img",{alt:"replay",src:_}):"Replay"})}var ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAVCAYAAACg/AXsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE/SURBVHgBzVTRTcNADLWt7EElQEr7xWcFQoQN2CBhkoYRmIBkAhghlSjwyVcbqUXKCAxQzviaXoLSc9WiftRSdDmf/Z79TmcExc6GYQREkdsz8+fX++zFF4s+5/nV4EmWxHOUzSfTexXEMSPCSQ3AFTPmbSDHgNgzzI8I+P23MtSYmeFh8TZNG5LLQSoEI19leHrdvyODz44ZkW8EO5J9IftxU0nH7ypjNLeEP3hRM2NumdtEtK2N3FcDrOLGqzhYt2ooCjrlQWBMtiQCzZZyvpHTdZQfZSVLCnvYBkg4DHtSSQJbKqlqIh3EAnhuoU2oW023ghy/Jj4tVBBNE58WKoimiU8LFeQ/mhAcwA4CEgCZApjsI4vlue+cKDMktqudK+t50s/EHcPexvl8MkuayWbnihsLO5l0sHgtC/v7C3GDpH+rvS+TAAAAAElFTkSuQmCC";function ne(e){var n=e.fixed;return(0,f.jsx)(A.rU,{to:"/game/rules",className:"pill rulesButton",children:n?(0,f.jsx)("img",{alt:"rules",src:ee}):"Rules"})}function te(e){var n=e.fixed;return(0,f.jsxs)(f.Fragment,{children:[n&&(0,f.jsx)("div",{className:"goatCounterFixed",children:(0,f.jsx)(q,{})}),(0,f.jsxs)("div",{className:n?"gameInfoAndButtonsContainerFixed":"gameInfoAndButtonsContainer",children:[!n&&(0,f.jsx)(q,{}),(0,f.jsx)(J,{fixed:n}),(0,f.jsx)(ne,{fixed:n}),(0,f.jsx)(W,{fixed:n}),(0,f.jsx)($,{fixed:n}),(0,f.jsx)(G,{fixed:n})]})]})}function re(e){return(0,c.Du)(e,"goat")&&function(e){if(0===e.goats.length&&(0,x.f)(e))return!0;var n=Array.from(e.goats).some((function(n){return Array.from(y.AU[n]).some((function(n){if(!ie(e,n))return!0}))}));if(n)return!1;return(0,x.f)(e)}(e)?"tiger":(0,c.Du)(e,"tiger")&&function(e){var n=Array.from(e.tigers).some((function(n){return Array.from(y.AU[n]).some((function(t){return!ie(e,t)||(!(!e.goats.includes(t)||null==(0,h.V)(e.tigers,e.goats,n,t))||void 0)}))}));return!n}(e)?"goat":null}function ie(e,n){return e.goats.includes(n)||e.tigers.includes(n)}function oe(e){var n=e.message;return(0,f.jsx)("div",{className:"messageBanner",children:(0,f.jsx)("div",{children:n})})}var ae=60;function se(){var e=(0,s.Z)(),n=(0,r.Z)(e,2),t=n[0],i=(n[1],(0,o.Z)()),a=(0,r.Z)(i,2),u=a[0],l=u.designation,d=u.gameType,g=(a[1],"tiger"===l&&"self"!==d?"You":"Tiger"),A="goat"===l&&"self"!==d?"You":"Goat";return(0,c.Du)(t,"tiger")?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"hasturn",children:[(0,f.jsx)("div",{children:g}),(0,f.jsx)(b,{element:(0,f.jsx)(D.Z,{style:{marginLeft:0,marginTop:0,height:ae,width:ae}})})]}),(0,f.jsxs)("div",{className:"notaturn",children:[(0,f.jsx)(w.Z,{height:ae}),(0,f.jsx)("div",{children:A})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"notaturn",children:[(0,f.jsx)("div",{children:g}),(0,f.jsx)(D.Z,{height:ae})]}),(0,f.jsxs)("div",{className:"hasturn",children:[(0,f.jsx)(b,{element:(0,f.jsx)(w.Z,{style:{marginLeft:-ae,marginTop:0,height:ae,width:ae}})}),(0,f.jsx)("div",{children:A})]})]})}var ue=t(5034);function le(){return(0,f.jsxs)("div",{className:"messageBanner",children:[(0,f.jsx)("div",{children:"Waiting for the other player"}),(0,f.jsx)(ue.g,{})]})}function ce(){var e=(0,o.Z)(),n=(0,r.Z)(e,2),t=n[0],a=t.gameType,u=t.opponentId,l=n[1],c=(0,s.Z)(),d=(0,r.Z)(c,2),g=d[0],A=d[1];return(0,i.useEffect)((function(){var e=re(g);e&&(l({type:"set_winner",value:e}),A({type:"gameover",value:e}))}),[g.moves]),(0,f.jsxs)("div",{className:"pill turnContainer",children:["p2p_internet"===a&&null===u&&(0,f.jsx)(le,{}),null==g.message&&(0,f.jsx)(se,{}),null!=g.message&&(0,f.jsx)(oe,{message:g.message})]})}var de=700,fe=120,ge=200,Ae=60,ve=20;function me(){var e=window.innerWidth,n=window.innerHeight,t=Math.min(n-Ae-fe,e-ve),r=Math.min(n-fe,e-ge);return[Math.min(Math.max(t,r),de),r<=t]}var pe=t(7689);function he(){var e=(0,i.useState)(me()),n=(0,r.Z)(e,2),t=(0,r.Z)(n[0],2),a=t[0],u=t[1],l=n[1],c=(0,s.Z)()[1],d=(0,o.Z)()[0].debug;return function(e){var n=(0,pe.f_)(),t=(0,o.Z)(),a=(0,r.Z)(t,2),s=a[0],u=a[1],l=(0,pe.TH)().state,c=(0,pe.s0)();(0,i.useEffect)((function(){if(null!=n||null!=l){if(l.gameHash!=s.gameHash)switch((null===n||void 0===n?void 0:n.gameType)||(null===l||void 0===l?void 0:l.gameType)){case"p2p_internet":return u((0,j.Z)({type:"new_game"},n)),void e({type:"server",value:n.moves});case"bot":case"self":return void u((0,j.Z)({type:"new_game"},l));default:console.error("not implemented!")}}else c("/")}),[n,l])}(c),(0,i.useEffect)((function(){function e(){l(me())}return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,f.jsx)("div",{className:"gameContainer",children:(0,f.jsxs)("div",{className:"content",children:[(0,f.jsxs)("div",{children:[d&&(0,f.jsx)(H,{}),(0,f.jsx)(ce,{}),(0,f.jsx)(Y,{boardSize:a})]}),(0,f.jsx)(te,{fixed:u})]})})}},738:function(e,n,t){t.d(n,{F:function(){return d}});var r=t(9439),i=t(4974),o=t(8137),a=t(2568),s=t(4867),u=t(9720),l=-20,c=20;function d(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c,f=(0,u.yf)(e),g=function(e){var n=(0,a.f)(e),t=n?i.b-e.goats.length:(0,a.V)(e)-e.goats.length,r=e.tigers.map((function(n){return(0,s.hI)(n,e.tigers,e.goats).length})).filter((function(e){return 0==e})).length;return t-5*r}(e);if(0==n||g==l||g==c)return g;if("goat"==f){var A=c,v=(0,s.YR)(e);for(var m in v){var p=(0,o.G)(e,{type:"move_directly",from:v[m][0],to:v[m][1]});if((A=Math.min(A,d(p,n-1,t,r)))<t)break;r=Math.min(r,A)}return A}var h=l,x=(0,s.ci)(e);for(var y in x){var j=(0,o.G)(e,{type:"move_directly",from:x[y][0],to:x[y][1]});if((h=Math.max(h,d(j,n-1,t,r)))>r)break;t=Math.max(t,h)}return h}self.onmessage=function(e){var n;if("best_bot_move"==(null===(n=e.data)||void 0===n?void 0:n.type)){var t=e.data,i=t.state,a=t.level;if(null!=a){var l,c=(0,u.yf)(i);if(0==(l="tiger"==c?(0,s.ci)(i):(0,s.YR)(i)).length)return self.postMessage(null),null;for(var f=l.map((function(e){var n=(0,r.Z)(e,2),t=n[0],s=n[1];return d((0,o.G)(i,{type:"move_directly",from:t,to:s}),a)})),g=f[0],A=l[0],v=1;v<f.length;v++)(f[v]>g&&"tiger"==c||f[v]<g&&"goat"==c)&&(A=l[v],g=f[v]);self.postMessage(A)}else console.error("bot smartness level missing")}}},4867:function(e,n,t){t.d(n,{YR:function(){return l},ci:function(){return s},hI:function(){return u},jf:function(){return c}});var r=t(3433),i=t(2387),o=t(2568),a=t(3920);function s(e){var n=e.tigers,t=e.goats,i=[];return n.forEach((function(e){i.push.apply(i,(0,r.Z)(u(e,n,t)))})),i}function u(e,n,t){var r=[];return a.AU[e].forEach((function(o){n.includes(o)||((0,a.W)(o,t,n)||null!=(0,i.V)(n,t,e,o))&&r.push([e,o])})),r}function l(e){if((0,o.f)(e)){var n=[];return e.goats.forEach((function(t){n.push.apply(n,(0,r.Z)(c(t,e)))})),n}return(0,a.A)(e.tigers,e.goats).map((function(e){return[e,e]}))}function c(e,n){var t=[];return a.AU[e].forEach((function(r){(0,a.W)(r,n.goats,n.tigers)&&t.push([e,r])})),t}}}]);
//# sourceMappingURL=218.b249ddbe.chunk.js.map
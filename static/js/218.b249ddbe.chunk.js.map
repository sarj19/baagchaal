{"version":3,"file":"static/js/218.b249ddbe.chunk.js","mappings":"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","sources":["Game/utils/getDimension.tsx","Game/utils/getNearestBoardPosition.tsx","Game/Board/BoardDecor.tsx","Game/Board/GameOver.tsx","Game/Board/LeaveGame.tsx","Game/Board/BoardOverlay.tsx","common/Ghosted.tsx","common/Highlight.tsx","common/Point.ts","Game/Board/useDraggablePiece.ts","Game/Board/GoatPiece.tsx","Game/Board/TigerPiece.tsx","Game/Board/BoradPieces.tsx","Game/utils/getHintHighlightPositions.ts","Game/Board/DebugPieceOverlay.tsx","Game/Board/Board.tsx","Game/utils/moveSelector.ts","Game/BoardContainer.tsx","Game/Debug.tsx","Game/GameStatus/GoatCounter.tsx","Game/GameStatus/Hint.tsx","Game/GameStatus/LeaveGameButton.tsx","Game/GameStatus/Options.tsx","Game/GameStatus/Replay.tsx","Game/GameStatus/RulesButton.tsx","Game/GameStatus/GameInfoAndButtons.tsx","Game/utils/winner.ts","Game/Header/MessageBanner.tsx","Game/Header/Turn.tsx","Game/Header/WaitingForOtherPlayer.tsx","Game/Header/GameHeader.tsx","Game/utils/getBoardSizeProps.ts","Game/Game.tsx","Game/utils/useInitializeStates.ts","Game/utils/bestBotMove.ts","Game/utils/possibleMoves.ts"],"sourcesContent":["export type Dimension = {\n  padding: number;\n  spacing: number;\n  start: number;\n  end: number;\n  midPoint: number;\n};\n\nexport default function getDimension(canvasSize: number): Dimension {\n  const padding = canvasSize / 10,\n    boardWidth = canvasSize - padding * 2,\n    spacing = boardWidth / 4;\n  const start = padding,\n    end = canvasSize - padding;\n  const midPoint = (start + end) / 2;\n\n  return { padding, spacing, start, end, midPoint };\n}\n","import { Position } from '../../common/types';\nimport getDimension from './getDimension';\n\nexport default function getNearestBoardPosition(\n  clientX: number,\n  clientY: number,\n  board: HTMLDivElement\n): Position | null {\n  const { padding, spacing } = getDimension(\n    Math.min(\n      board.getBoundingClientRect().width,\n      board.getBoundingClientRect().height\n    )\n  );\n  const clickTolerance = spacing * 0.48 * (spacing * 0.48);\n\n  const x = clientX - board.offsetLeft;\n  const y = clientY - board.offsetTop;\n\n  const i = Math.round((x - (x % spacing)) / spacing);\n  const j = Math.round((y - (y % spacing)) / spacing);\n\n  const actualX = padding + i * spacing;\n  const actualY = padding + j * spacing;\n  const distance =\n    (actualX - x) * (actualX - x) + (actualY - y) * (actualY - y);\n  const closeEnough = distance < clickTolerance;\n\n  if (closeEnough) {\n    // @ts-ignore\n    return j * 5 + i;\n  } else {\n    return null;\n  }\n}\n","import React, { ReactElement, useEffect, useRef } from 'react';\n\nimport useGameContext from '../../reducers/useGameContext';\nimport useGameState from '../reducers/useGameState';\nimport getNearestBoardPosition from '../utils/getNearestBoardPosition';\nimport { gameOver, isTurn } from '../utils/turn';\nimport board from './board.png';\n\ntype Props = { width: number; height: number };\n\nexport default function BoardDecor({ width, height }: Props): ReactElement {\n  const boardRef = useRef<HTMLImageElement | null>(null);\n\n  const [state, stateDispatch] = useGameState();\n  const [gameContext, _] = useGameContext();\n\n  useEffect(() => {\n    if (gameOver(gameContext)) return;\n    const boardImage = boardRef.current!;\n    // @ts-ignore\n    const board: HTMLDivElement = boardImage.parentElement!;\n\n    const onDragEnd = (e: DragEvent | MouseEvent) => {\n      if (!isTurn(state, gameContext.designation)) return;\n      e.preventDefault();\n\n      const boardPosition = getNearestBoardPosition(\n        e.clientX,\n        e.clientY,\n        board\n      );\n      if (boardPosition == null) {\n        stateDispatch({ type: 'select', value: boardPosition });\n      } else {\n        stateDispatch({ type: 'move', value: boardPosition });\n      }\n    };\n\n    const onTouchEnd = (e: TouchEvent) => {\n      if (!isTurn(state, gameContext.designation)) return;\n\n      const _e = e.changedTouches.item(0);\n      if (_e == null) {\n        return null;\n      }\n\n      const boardPosition = getNearestBoardPosition(\n        _e.clientX,\n        _e.clientY,\n        board\n      );\n      if (boardPosition == null) {\n        stateDispatch({ type: 'select', value: boardPosition });\n      } else {\n        stateDispatch({ type: 'move', value: boardPosition });\n      }\n    };\n\n    const onClick = (e: MouseEvent) => {\n      if (!isTurn(state, gameContext.designation)) {\n        stateDispatch({ type: 'selected_without_turn' });\n      } else {\n        const boardPosition = getNearestBoardPosition(\n          e.clientX,\n          e.clientY,\n          board\n        );\n        if (state.selectedPiece == null || boardPosition == null) {\n          stateDispatch({ type: 'select', value: boardPosition });\n        } else {\n          stateDispatch({ type: 'move', value: boardPosition });\n        }\n      }\n    };\n\n    board.addEventListener('click', onClick);\n    board.addEventListener('mouseup', onDragEnd);\n    board.addEventListener('dragend', onDragEnd);\n    board.addEventListener('touchend', onTouchEnd);\n\n    return () => {\n      board.removeEventListener('click', onClick);\n      board.removeEventListener('mouseup', onDragEnd);\n      board.removeEventListener('dragend', onDragEnd);\n      board.removeEventListener('touchend', onTouchEnd);\n    };\n  }, [boardRef.current, state.moves, gameContext.designation]);\n\n  return <img alt=\"board\" ref={boardRef} src={board} height={height} width={width} />;\n}\n","import '../../styles/BoardOverlay.css';\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport useGameContext from '../../reducers/useGameContext';\nimport { gameOver } from '../utils/turn';\n\nexport function GameOver() {\n  const gameContext = useGameContext()[0];\n\n  if (!gameOver(gameContext)) {\n    return <></>;\n  }\n\n  const { winner, designation, gameType } = gameContext;\n\n  let displayText = `${winner} won`;\n  if (gameType == 'self') {\n    // default text\n  } else if (designation == winner) {\n    displayText = 'You won!';\n  } else if (designation != winner) {\n    displayText = 'You lost!';\n  }\n\n  return (\n    <div className=\"boardOverlayContainer\">\n      <div>{displayText}</div>\n      <Link to=\"/\" replace={true}>\n        <button className=\"pill playNewGameButton\"> Play new game </button>\n      </Link>\n    </div>\n  );\n}\n","import '../../styles/BoardOverlay.css';\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport useGameContext from '../../reducers/useGameContext';\n\nexport default function LeaveGame() {\n  const [{ showLeaveGame }, dispatch] = useGameContext();\n\n  if (!showLeaveGame) {\n    return <></>;\n  }\n\n  return (\n    <div className=\"boardOverlayContainer\">\n      <div>Are you sure?</div>\n      <Link to=\"/\" replace={true} className=\"pill leaveGameConfirmation\">\n        Yes\n      </Link>\n      <a\n        className=\"pill leaveGameConfirmation\"\n        onClick={() => {\n          dispatch({ type: 'leave_game', value: false });\n        }}\n      >\n        No\n      </a>\n    </div>\n  );\n}\n","import React from 'react';\n\nimport { GameOver } from './GameOver';\nimport LeaveGame from './LeaveGame';\n\nexport function BoardOverlay() {\n  return (\n    <>\n      <GameOver />\n      <LeaveGame />\n    </>\n  );\n}\n","import React, { ReactElement } from 'react';\n\nconst HIGHLIGHT_SIZE = 5;\ntype Props = { element: ReactElement };\nexport default function Ghosted({ element }: Props) {\n  return React.cloneElement(element, {\n    style: {\n      ...element.props.style,\n      marginLeft: element.props.style.marginLeft - HIGHLIGHT_SIZE,\n      marginTop: element.props.style.marginTop - HIGHLIGHT_SIZE,\n      width: element.props.style.width + HIGHLIGHT_SIZE * 2,\n      height: element.props.style.height + HIGHLIGHT_SIZE * 2,\n      filter: \"opacity(0.4) blur(2px) grayscale(1)\",\n    },\n  });\n}\n","import React, { ReactElement } from 'react';\n\nconst HIGHLIGHT_SIZE = 5;\ntype Props = { element: ReactElement };\nexport default function Highlight({ element }: Props) {\n  return React.cloneElement(element, {\n    style: {\n      ...element.props.style,\n      marginLeft: element.props.style.marginLeft - HIGHLIGHT_SIZE,\n      marginTop: element.props.style.marginTop - HIGHLIGHT_SIZE,\n      width: element.props.style.width + HIGHLIGHT_SIZE * 2,\n      height: element.props.style.height + HIGHLIGHT_SIZE * 2,\n      filter: 'drop-shadow(0px 0px 12px yellow)',\n    },\n  });\n}\n","export default class Point {\n  x: number;\n  y: number;\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","import { Dispatch, SetStateAction, useEffect, useMemo, useState } from 'react';\n\nimport Point from '../../common/Point';\nimport { Position } from '../../common/types';\nimport getDimension from '../utils/getDimension';\n\nexport function useDraggablePiece(\n  element: React.RefObject<HTMLImageElement>,\n  size: number,\n  boardSize: number,\n  position: Position\n): [number, number, Dispatch<SetStateAction<boolean>>] {\n  const [dragging, setDragging] = useState(false);\n  const [mousePos, setMousePos] = useState<Point | null>(null);\n\n  const j = Math.floor(position / 5);\n  const i = position - j * 5;\n\n  const { padding, spacing } = useMemo(\n    () => getDimension(boardSize),\n    [boardSize]\n  );\n\n  useEffect(() => {\n    const board = element.current?.parentElement;\n    if (board == null) return;\n    if (!dragging) return;\n\n    const onDragEnd = (e: UIEvent) => {\n      setDragging(false);\n      e.preventDefault();\n    };\n\n    const onDrag = (e: MouseEvent | DragEvent) => {\n      if (dragging) {\n        e.preventDefault();\n        setMousePos(new Point(e.x, e.y));\n      }\n    };\n\n    const onTouchMove = (e: TouchEvent) => {\n      if (dragging) {\n        e.preventDefault();\n        const _e = e.touches.item(0);\n        if (_e != null) {\n          setMousePos(new Point(_e.clientX, _e.clientY));\n        }\n      }\n    };\n\n    board.addEventListener('mouseup', onDragEnd);\n    board.addEventListener('dragend', onDragEnd);\n    board.addEventListener('touchend', onDragEnd);\n\n    board.addEventListener('drag', onDrag);\n    board.addEventListener('mousemove', onDrag);\n    board.addEventListener('touchmove', onTouchMove, { passive: false });\n\n    return () => {\n      board.removeEventListener('mouseup', onDragEnd);\n      board.removeEventListener('dragend', onDragEnd);\n      board.removeEventListener('touchend', onDragEnd);\n\n      board.removeEventListener('drag', onDrag);\n      board.removeEventListener('mousemove', onDrag);\n      board.removeEventListener('touchmove', onTouchMove);\n      setMousePos(null);\n    };\n  }, [dragging, element.current]);\n\n  if (dragging && mousePos) {\n    const parentLeft =\n      element.current?.parentElement?.getBoundingClientRect().left;\n    const parentTop =\n      element.current?.parentElement?.getBoundingClientRect().top;\n    const marginLeft =\n      mousePos.x - size / 2 - (parentLeft == null ? 0 : parentLeft);\n    const marginTop =\n      mousePos.y - size / 2 - (parentTop == null ? 0 : parentTop);\n\n    return [marginLeft, marginTop, setDragging];\n  } else {\n    return [\n      padding + i * spacing - size / 2,\n      padding + j * spacing - size / 2,\n      setDragging,\n    ];\n  }\n}\n","import React, { MouseEventHandler, ReactElement, useRef } from 'react';\n\nimport Ghosted from '../../common/Ghosted';\nimport Goat from '../../common/Goat';\nimport Highlight from '../../common/Highlight';\nimport { Position } from '../../common/types';\nimport useGameContext from '../../reducers/useGameContext';\nimport useGameState from '../reducers/useGameState';\nimport { gameOver, isTurn } from '../utils/turn';\nimport { useDraggablePiece } from './useDraggablePiece';\n\ntype Props = {\n  boardSize: number;\n  position: Position;\n  selected: boolean;\n  type: 'highlight' | 'gray' | 'default';\n};\nexport default function GoatPiece({\n  boardSize,\n  position,\n  selected,\n  type,\n}: Props): ReactElement {\n  const [state, stateDispatch] = useGameState();\n  const gameContext = useGameContext()[0];\n  const size = selected ? 90 : 70;\n  const goat = useRef<HTMLImageElement>(null);\n\n  const [marginLeft, marginTop, setDragging] = useDraggablePiece(\n    goat,\n    size,\n    boardSize,\n    position\n  );\n  const pieceClicked = () => {\n    if (gameOver(gameContext)) return;\n    if (isTurn(state, gameContext.designation)) {\n      if (state.selectedPiece == null || position == null) {\n        stateDispatch({ type: 'select', value: position });\n      } else {\n        stateDispatch({ type: 'move', value: position });\n      }\n    } else {\n      stateDispatch({ type: 'selected_without_turn' });\n    }\n  };\n\n  const pieceDragged: MouseEventHandler<HTMLImageElement> = (e) => {\n    if (gameOver(gameContext)) return;\n    if (isTurn(state, gameContext.designation)) {\n      setDragging(true);\n      e.preventDefault();\n      stateDispatch({ type: 'select', value: position });\n    }\n  };\n\n  const element = (\n    <Goat\n      ref={goat}\n      onMouseDown={pieceDragged}\n      onClick={pieceClicked}\n      style={{\n        marginLeft,\n        marginTop,\n        width: size,\n        height: size,\n      }}\n    />\n  );\n\n  if (type === 'highlight') {\n    return <Highlight element={element} />;\n  } else if (type === 'gray') {\n    return <Ghosted element={element} />;\n  }\n\n  return element;\n}\n","import React, { EventHandler, ReactElement, UIEvent, useRef } from 'react';\n\nimport Highlight from '../../common/Highlight';\nimport Tiger from '../../common/Tiger';\nimport { Position } from '../../common/types';\nimport useGameContext from '../../reducers/useGameContext';\nimport useGameState from '../reducers/useGameState';\nimport { gameOver, isTurn } from '../utils/turn';\nimport { useDraggablePiece } from './useDraggablePiece';\n\ntype Props = {\n  boardSize: number;\n  position: Position;\n  selected: boolean;\n  highlight: boolean;\n};\n\nexport default function TigerPiece({\n  boardSize,\n  position,\n  selected,\n  highlight,\n}: Props): ReactElement {\n  const [state, stateDispatch] = useGameState();\n  const gameContext = useGameContext()[0];\n  const size = selected ? 90 : 70;\n  const tiger = useRef<HTMLImageElement>(null);\n\n  const [marginLeft, marginTop, setDragging] = useDraggablePiece(\n    tiger,\n    size,\n    boardSize,\n    position\n  );\n  const pieceClicked = () => {\n    if (gameOver(gameContext)) return;\n    if (isTurn(state, gameContext.designation)) {\n      if (state.selectedPiece == null || position == null) {\n        stateDispatch({ type: \"select\", value: position });\n      } else {\n        stateDispatch({ type: \"move\", value: position });\n      }\n    } else {\n      stateDispatch({ type: \"selected_without_turn\" });\n    }\n  };\n\n  const pieceDragged: EventHandler<UIEvent> = (e) => {\n    e.preventDefault();\n    if (gameOver(gameContext)) return;\n\n    if (isTurn(state, gameContext.designation)) {\n      setDragging(true);\n      stateDispatch({ type: \"select\", value: position });\n    } else {\n      setDragging(false);\n    }\n  };\n\n  const element = (\n    <Tiger\n      ref={tiger}\n      onMouseDown={pieceDragged}\n      onTouchStart={pieceDragged}\n      onClick={pieceClicked}\n      style={{\n        marginLeft,\n        marginTop,\n        width: size,\n        height: size,\n      }}\n    />\n  );\n\n  return highlight ? <Highlight element={element} /> : element;\n}\n","import React from 'react';\n\nimport useGameContext from '../../reducers/useGameContext';\nimport useGameState from '../reducers/useGameState';\nimport getHintHighlightPositions from '../utils/getHintHighlightPositions';\nimport { isTurn } from '../utils/turn';\nimport GoatPiece from './GoatPiece';\nimport TigerPiece from './TigerPiece';\n\nexport default function BoradPieces({ boardSize }: { boardSize: number }) {\n  const [state, __] = useGameState();\n  const [context, _] = useGameContext();\n\n  const [highlight, possibleNewPosForGoats] = getHintHighlightPositions(\n    state,\n    context\n  );\n\n  return (\n    <>\n      {state.tigers.map((position) => (\n        <TigerPiece\n          boardSize={boardSize}\n          position={position}\n          selected={position == state.selectedPiece}\n          highlight={highlight.has(position)}\n          key={position}\n        />\n      ))}\n      {state.goats.map((position) => (\n        <GoatPiece\n          boardSize={boardSize}\n          position={position}\n          selected={position == state.selectedPiece}\n          type={highlight.has(position) ? 'highlight' : 'default'}\n          key={position}\n        />\n      ))}\n      {state.selectedPiece != null &&\n      isTurn(state, 'goat') &&\n      !state.goats.includes(state.selectedPiece) ? (\n        <GoatPiece\n          boardSize={boardSize}\n          position={state.selectedPiece}\n          selected={false}\n          type=\"gray\"\n          key={state.selectedPiece}\n        />\n      ) : null}\n      {/* {possibleNewPosForGoats.map((position) => (\n        <GoatPiece\n          position={position}\n          selected={false}\n          type=\"gray\"\n          key={position}\n          onClick={() => pieceClicked(position)}\n        />\n      ))} */}\n    </>\n  );\n}\n","import { GameContext, GameState, Position } from '../../common/types';\nimport { canTigerEatGoat } from './canTigerEatGoat';\nimport { isAllGoatsPlayed } from './goats';\nimport { isTurn } from './turn';\nimport { adjancentPositions, ARR_0_TO_24 } from './validPositions';\n\nexport default function getHintHighlightPositions(\n  state: GameState,\n  { hint, designation }: GameContext\n): [Set<Position>, Position[]] {\n  const highlight = new Set<Position>();\n  let possibleNewPosForGoats: Position[] = [];\n  if (hint === true && isTurn(state, designation)) {\n    if (isTurn(state, 'goat')) {\n      if (isAllGoatsPlayed(state)) {\n        state.goats.forEach((goat) => {\n          adjancentPositions[goat].forEach((adjPos) => {\n            if (\n              !state.goats.includes(adjPos) &&\n              !state.tigers.includes(adjPos)\n            ) {\n              // if nobody nearby\n              highlight.add(goat);\n            }\n          });\n        });\n      } else {\n        // show potential place to drop goats\n        possibleNewPosForGoats = ARR_0_TO_24.filter(\n          (pos) => !state.goats.includes(pos) && !state.tigers.includes(pos)\n        );\n      }\n    } else if (isTurn(state, 'tiger')) {\n      state.tigers.forEach((tiger) => {\n        adjancentPositions[tiger].forEach((adjPos) => {\n          if (state.goats.includes(adjPos)) {\n            // has goats, so check if can eat\n            if (canTigerEatGoat(state.tigers, state.goats, tiger, adjPos)) {\n              highlight.add(tiger);\n            }\n          } else if (!state.tigers.includes(adjPos)) {\n            // not blocked by other tigers\n            highlight.add(tiger);\n          }\n        });\n      });\n    }\n  }\n\n  return [highlight, possibleNewPosForGoats];\n}\n","import React, { ReactNode, useMemo } from 'react';\n\nimport { Position } from '../../common/types';\nimport useGameContext from '../../reducers/useGameContext';\nimport { gameStateReducer } from '../reducers/gameStateReducer';\nimport useGameState from '../reducers/useGameState';\nimport { getScore } from '../utils/bestBotMove';\nimport getDimension from '../utils/getDimension';\nimport { isAllGoatsPlayed } from '../utils/goats';\nimport { getPossibleMovesForGoat, getPossibleMovesForTiger } from '../utils/possibleMoves';\nimport { isTurn } from '../utils/turn';\nimport { ARR_0_TO_24, isEmptySpace } from '../utils/validPositions';\n\nexport function DebugPieceOverlay({ boardSize }: { boardSize: number }) {\n  const [state, _] = useGameState();\n  const [context, __] = useGameContext();\n  const botLevel = context.botLevel ? context.botLevel : 2;\n\n  if (isTurn(state, 'goat') && isAllGoatsPlayed(state)) {\n    return (\n      <>\n        {state.goats.map((position) => {\n          const possibleMoves = getPossibleMovesForGoat(position, state);\n          const scores = possibleMoves.map(([from, to]) => {\n            const newState = gameStateReducer(state, {\n              type: 'move_directly',\n              from,\n              to,\n            });\n            return getScore(newState, botLevel);\n          });\n          return (\n            <DebugInfo boardSize={boardSize} position={position} key={position}>\n              {possibleMoves.map((v, i) => (\n                <>\n                  {v[1]} -&gt; {-scores[i]}\n                  <br />\n                </>\n              ))}\n            </DebugInfo>\n          );\n        })}\n      </>\n    );\n  } else if (isTurn(state, 'goat') /* need to place goats*/) {\n    return (\n      <>\n        {ARR_0_TO_24.filter((position) =>\n          isEmptySpace(position, state.goats, state.tigers)\n        ).map((position) => {\n          const newState = gameStateReducer(state, {\n            type: 'move_directly',\n            from: position,\n            to: position,\n          });\n          const score = getScore(newState, botLevel);\n\n          return (\n            <DebugInfo boardSize={boardSize} position={position} key={position}>\n              {-score}\n            </DebugInfo>\n          );\n        })}\n      </>\n    );\n  } else {\n    return (\n      <>\n        {state.tigers.map((position) => {\n          const possibleMoves = getPossibleMovesForTiger(\n            position,\n            state.tigers,\n            state.goats\n          );\n          const scores = possibleMoves.map(([from, to]) => {\n            const newState = gameStateReducer(state, {\n              type: 'move_directly',\n              from,\n              to,\n            });\n            return getScore(newState, botLevel);\n          });\n\n          return (\n            <DebugInfo boardSize={boardSize} position={position} key={position}>\n              {possibleMoves.map((v, i) => (\n                <>\n                  {v[1]} -&gt; {scores[i]}\n                  <br />\n                </>\n              ))}\n            </DebugInfo>\n          );\n        })}\n      </>\n    );\n  }\n}\n\nfunction DebugInfo({\n  boardSize,\n  position,\n  children,\n}: {\n  boardSize: number;\n  position: Position;\n  children: ReactNode;\n}) {\n  const j = Math.floor(position / 5);\n  const i = position - j * 5;\n\n  const { padding, spacing } = useMemo(\n    () => getDimension(boardSize),\n    [boardSize]\n  );\n  const x = padding + i * spacing;\n  const y = padding + j * spacing;\n\n  return (\n    <div\n      style={{\n        marginLeft: x,\n        marginTop: y,\n        position: 'absolute',\n        backgroundColor: 'black',\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n","import '../../styles/Game.css';\n\nimport React, { ReactElement } from 'react';\n\nimport useGameContext from '../../reducers/useGameContext';\nimport BoardDecor from './BoardDecor';\nimport { BoardOverlay } from './BoardOverlay';\nimport BoradPieces from './BoradPieces';\nimport { DebugPieceOverlay } from './DebugPieceOverlay';\n\nexport default function Board({\n  boardSize,\n}: {\n  boardSize: number;\n}): ReactElement {\n  const { debug } = useGameContext()[0];\n  return (\n    <div\n      className=\"boardContainer\"\n      style={{ width: boardSize, height: boardSize }}\n    >\n      <BoardDecor width={boardSize} height={boardSize} />\n      <BoradPieces boardSize={boardSize} />\n      {debug && <DebugPieceOverlay boardSize={boardSize} />}\n      <BoardOverlay />\n    </div>\n  );\n}\n","import { GameState, Move } from '../../common/types';\nimport { getPossibleMovesForGoats, getPossibleMovesForTigers } from './possibleMoves';\nimport { getTurn } from './turn';\n\nfunction getRandomMove(state: GameState): Move | null {\n  const turn = getTurn(state);\n  let possibleMoves: Move[];\n  if (turn == 'tiger') {\n    possibleMoves = getPossibleMovesForTigers(state);\n  } /* goat */ else {\n    possibleMoves = getPossibleMovesForGoats(state);\n  }\n\n  if (possibleMoves.length == 0) return null;\n\n  const moveIndex = Math.floor(Math.random() * possibleMoves.length);\n  return possibleMoves[moveIndex];\n}\n\nexport function getScoredMove(\n  state: GameState,\n  level: number,\n  onMove: (scoredMove: Move | null) => void\n) {\n  if (level == 0) {\n    onMove(getRandomMove(state));\n    return;\n  }\n  const worker = new Worker(new URL('./bestBotMove.ts', import.meta.url));\n  worker.onmessage = (ev) => {\n    onMove(ev.data);\n  };\n\n  worker.postMessage({\n    type: 'best_bot_move',\n    state,\n    level,\n  });\n}\n","import React, { ReactElement, useEffect, useRef } from 'react';\nimport { io, Socket } from 'socket.io-client';\n\nimport { ServerData } from '../common/types';\nimport useGameContext from '../reducers/useGameContext';\nimport Board from './Board/Board';\nimport useGameState from './reducers/useGameState';\nimport { getScoredMove } from './utils/moveSelector';\nimport { gameOver, getTurn } from './utils/turn';\n\nexport default function BoardContainer({\n  boardSize,\n}: {\n  boardSize: number;\n}): ReactElement {\n  const [state, stateDispatch] = useGameState();\n  const [gameContext, contextDispatch] = useGameContext();\n  const { userId, gameHash, gameType, designation, botLevel } = gameContext;\n  const prevTurn = useRef(getTurn(state));\n  const socketRef = useRef<Socket | null>(null);\n\n  useEffect(() => {\n    if (gameType == \"p2p_internet\") {\n      const socket = io({ auth: { token: gameHash } })\n        .onAny((event, args) => {\n          console.log(\"received\", event, args);\n        })\n        .onAnyOutgoing((event, args) => {\n          console.log(\"sending\", event, args);\n        })\n        .on(\"connect_error\", (err) => {\n          console.log(`connect_error due to ${err.message}`);\n        })\n        .on(\"movepiece\", (data: ServerData) => {\n          // TODO verify opponent's userId after storing it for first time\n          // use opponent id instead of players count\n          if (data.gameHash == gameHash) {\n            prevTurn.current = getTurn(state) == \"goat\" ? \"tiger\" : \"goat\";\n            stateDispatch({ type: \"server\", value: data.moves });\n          }\n        })\n        .once(\"opponentJoined\", (opponentId) => {\n          contextDispatch({ type: \"set_opponent\", opponentId });\n        })\n        .emit(\"gamejoined\", { userId, gameHash });\n\n      socketRef.current = socket;\n      return () => {\n        socket.disconnect();\n      };\n    }\n  }, [gameType, gameHash]);\n\n  useEffect(() => {\n    if (gameOver(gameContext)) return;\n    if (gameType == \"p2p_internet\") {\n      if (prevTurn.current == getTurn(state)) return;\n      prevTurn.current = getTurn(state);\n\n      try {\n        socketRef!.current!.emit(\"movepiece\", {\n          userId,\n          gameHash,\n          moves: state.moves,\n        });\n      } catch (err) {\n        // TODO user server disconnected error message\n      }\n    } else if (gameType == \"bot\") {\n      // user's turn so let them play\n      if (\n        getTurn(state) == designation ||\n        designation == null ||\n        state == null\n      ) {\n        return;\n      }\n\n      stateDispatch({ type: \"bot_thinking\" });\n      getScoredMove(state, botLevel ? botLevel : 2, (selectedMove) => {\n        if (selectedMove != null) {\n          const [from, to] = selectedMove;\n          // give user feel by waiting\n          stateDispatch({ type: \"select\", value: from });\n          setTimeout(() => {\n            stateDispatch({ type: \"move\", value: to });\n          }, 1000);\n        }\n      });\n    } else if (gameType == \"self\") {\n      // update the designation after each turn as you are playing with yourself\n      contextDispatch({\n        type: \"designate\",\n        value: getTurn(state),\n      });\n    }\n  }, [state.moves, gameType]);\n\n  return <Board boardSize={boardSize} />;\n}\n","import React, { useEffect, useRef } from 'react';\n\nimport { Position } from '../common/types';\nimport useGameContext from '../reducers/useGameContext';\nimport useGameState from './reducers/useGameState';\nimport { getTurn } from './utils/turn';\n\nexport default function Debug() {\n  const context = useGameContext()[0];\n  const state = useGameState()[0];\n  const prevState = useRef(state);\n  const prevContext = useRef(context);\n\n  useEffect(() => {\n    console.debug('=======DEBUG=======', 'turn', getTurn(state));\n    if (prevContext.current != context) {\n      for (let prop in context) {\n        // @ts-ignore\n        if (context[prop] != prevContext.current[prop]) {\n          // @ts-ignore\n          console.debug(prop, context[prop]);\n        }\n      }\n      prevContext.current = context;\n    }\n    if (prevState.current != state) {\n      for (let prop in state) {\n        // @ts-ignore\n        if (state[prop] != prevState.current[prop]) {\n          if (prop == 'moves') {\n            console.debug(\n              prop,\n              // @ts-ignore\n              state[prop]\n                .slice(prevState.current[prop].length)\n                .reduce(\n                  (acc: string, value: [Position, Position]) =>\n                    `${acc} [${value[0]} => ${value[1]}]`,\n                  '...'\n                )\n            );\n          } else {\n            // @ts-ignore\n            console.debug(prop, state[prop]);\n          }\n        }\n      }\n      prevState.current = state;\n    }\n  }, [context, state]);\n\n  return <></>;\n}\n","import '../../styles/common.css';\nimport '../../styles/GoatCounter.css';\n\nimport React from 'react';\n\nimport Goat from '../../common/Goat';\nimport { MAX_GOATS } from '../../common/types';\nimport useGameState, { GameStateContextReducer } from '../reducers/useGameState';\nimport { getNumberOfGoatsPlayed } from '../utils/goats';\n\nexport default function GoatCounter() {\n  const [state, _]: GameStateContextReducer = useGameState();\n\n  return (\n    <>\n      <div className=\"goatCountContainer pill\">\n        Goat Left {MAX_GOATS - getNumberOfGoatsPlayed(state)}\n      </div>\n      <div className=\"goatCountContainer pill\">\n        Goat Eaten {getNumberOfGoatsPlayed(state) - state.goats.length}\n      </div>\n    </>\n  );\n}\n","import '../../styles/common.css';\n\nimport React from 'react';\n\nimport useGameContext from '../../reducers/useGameContext';\nimport hintIcon from './hintIcon.png';\n\nexport default function Hint({ fixed }: { fixed: boolean }) {\n  const [state, dispatch] = useGameContext();\n  return (\n    <button\n      className={state.hint ? 'pill activePill' : 'pill'}\n      onClick={() => dispatch({ type: state.hint ? 'nohint' : 'hint' })}\n    >\n      {fixed ? <img alt=\"hint\" src={hintIcon} /> : 'Hint'}\n    </button>\n  );\n}\n","import '../../styles/common.css';\n\nimport React from 'react';\n\nimport useGameContext from '../../reducers/useGameContext';\nimport leaveIcon from './leaveIcon.png';\n\nexport default function LeaveGameButton({ fixed }: { fixed: boolean }) {\n  const dispatch = useGameContext()[1];\n  return (\n    <button\n      className=\"pill\"\n      onClick={() => {\n        dispatch({ type: 'leave_game', value: true });\n      }}\n    >\n      {fixed ? <img alt=\"leave\" src={leaveIcon} /> : 'Leave Game'}\n    </button>\n  );\n}\n","import '../../styles/common.css';\n\nimport React from 'react';\n\nimport settingsIcon from './settingsIcon.png';\n\nexport default function Options({ fixed }: { fixed: boolean }) {\n  return (\n    <button className=\"pill\" disabled={true}>\n      {fixed ? <img alt=\"options\" src={settingsIcon} /> : 'Options'}\n    </button>\n  );\n}\n","import '../../styles/common.css';\n\nimport React from 'react';\n\nimport replayIcon from './replayIcon.png';\n\nexport default function Replay({ fixed }: { fixed: boolean }) {\n  return (\n    <button className=\"pill\" disabled={true}>\n      {fixed ? <img alt=\"replay\" src={replayIcon} /> : 'Replay'}\n    </button>\n  );\n}\n","import '../../styles/common.css';\nimport '../../styles/GameInfoAndButtons.css';\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport rulesIcon from './rulesIcon.png';\n\nexport default function RulesButton({ fixed }: { fixed: boolean }) {\n  return (\n    <Link to=\"/game/rules\" className=\"pill rulesButton\">\n      {fixed ? <img alt=\"rules\" src={rulesIcon} /> : 'Rules'}\n    </Link>\n  );\n}\n","import '../../styles/GameInfoAndButtons.css';\n\nimport React from 'react';\n\nimport GoatCounter from './GoatCounter';\nimport Hint from './Hint';\nimport LeaveGameButton from './LeaveGameButton';\nimport Options from './Options';\nimport Replay from './Replay';\nimport RulesButton from './RulesButton';\n\nexport default function GameInfoAndButtons({ fixed }: { fixed: boolean }) {\n  return (\n    <>\n      {fixed && (\n        <div className=\"goatCounterFixed\">\n          <GoatCounter />\n        </div>\n      )}\n      <div\n        className={\n          fixed\n            ? \"gameInfoAndButtonsContainerFixed\"\n            : \"gameInfoAndButtonsContainer\"\n        }\n      >\n        {!fixed && <GoatCounter />}\n        <Hint fixed={fixed} />\n        <RulesButton fixed={fixed} />\n        <Options fixed={fixed} />\n        <Replay fixed={fixed} />\n        <LeaveGameButton fixed={fixed} />\n      </div>\n    </>\n  );\n}\n","import { GameState, PieceType, Position } from '../../common/types';\nimport { canTigerEatGoat } from './canTigerEatGoat';\nimport { isAllGoatsPlayed } from './goats';\nimport { isTurn } from './turn';\nimport { adjancentPositions } from './validPositions';\n\nexport function getWinner(state: GameState): PieceType | null {\n  if (isTurn(state, 'goat') && checkIfGoatLost(state)) {\n    return 'tiger';\n  } else if (isTurn(state, 'tiger') && checkIfTigerLost(state)) {\n    return 'goat';\n  }\n  return null;\n}\n\nfunction checkIfTigerLost(state: GameState) {\n  // check if tiger has moves\n  const tigerHasMoves = Array.from(state.tigers).some((tigerPos) =>\n    Array.from(adjancentPositions[tigerPos]).some((adjPos) => {\n      // adjacent is not occuppied\n      if (!isOccupied(state, adjPos)) {\n        return true;\n      }\n      // adjancet has goat and can be eaten\n      if (state.goats.includes(adjPos)) {\n        if (\n          canTigerEatGoat(state.tigers, state.goats, tigerPos, adjPos) != null\n        ) {\n          return true;\n        }\n      }\n    })\n  );\n\n  return !tigerHasMoves;\n}\n\nfunction checkIfGoatLost(state: GameState) {\n  // check if there are no more goats\n  if (state.goats.length === 0 && isAllGoatsPlayed(state)) {\n    return true;\n  }\n\n  // check if goats has moves\n  const goatHasMoves = Array.from(state.goats).some((goatPos) =>\n    Array.from(adjancentPositions[goatPos]).some((adjPos) => {\n      if (!isOccupied(state, adjPos)) {\n        return true;\n      }\n    })\n  );\n\n  if (goatHasMoves) {\n    return false;\n  }\n\n  return isAllGoatsPlayed(state);\n}\n\nfunction isOccupied(state: GameState, position: Position) {\n  return state.goats.includes(position) || state.tigers.includes(position);\n}\n","import '../../styles/GameHeader.css';\n\nimport React from 'react';\n\nexport default function MessageBanner({ message }: { message: string }) {\n  return (\n    <div className=\"messageBanner\">\n      <div>{message}</div>\n    </div>\n  );\n}\n","import '../../styles/common.css';\nimport '../../styles/GameHeader.css';\n\nimport React from 'react';\n\nimport Goat from '../../common/Goat';\nimport Highlight from '../../common/Highlight';\nimport Tiger from '../../common/Tiger';\nimport useGameContext from '../../reducers/useGameContext';\nimport useGameState from '../reducers/useGameState';\nimport { isTurn } from '../utils/turn';\n\nconst IMG_SIZE = 60;\n\nexport default function Turn() {\n  const [state, _] = useGameState();\n  const [{ designation, gameType }, __] = useGameContext();\n\n  const tiger =\n    designation === 'tiger' && gameType !== 'self' ? 'You' : 'Tiger';\n  const goat = designation === 'goat' && gameType !== 'self' ? 'You' : 'Goat';\n\n  if (isTurn(state, 'tiger')) {\n    return (\n      <>\n        <div className=\"hasturn\">\n          <div>{tiger}</div>\n          <Highlight\n            element={\n              <Tiger\n                style={{\n                  marginLeft: 0,\n                  marginTop: 0,\n                  height: IMG_SIZE,\n                  width: IMG_SIZE,\n                }}\n              />\n            }\n          />\n        </div>\n        <div className=\"notaturn\">\n          <Goat height={IMG_SIZE} />\n          <div>{goat}</div>\n        </div>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <div className=\"notaturn\">\n          <div>{tiger}</div>\n          <Tiger height={IMG_SIZE} />\n        </div>\n        <div className=\"hasturn\">\n          <Highlight\n            element={\n              <Goat\n                style={{\n                  marginLeft: -IMG_SIZE,\n                  marginTop: 0,\n                  height: IMG_SIZE,\n                  width: IMG_SIZE,\n                }}\n              />\n            }\n          />\n          <div>{goat}</div>\n        </div>\n      </>\n    );\n  }\n}\n","import '../../styles/GameHeader.css';\n\nimport React from 'react';\n\nimport { Loading } from '../../common/Loading';\n\nexport default function WaitingForOtherPlayer() {\n  return (\n    <div className=\"messageBanner\">\n      <div>Waiting for the other player</div>\n      <Loading />\n    </div>\n  );\n}\n","import '../../styles/GameHeader.css';\n\nimport React, { useEffect } from 'react';\n\nimport useGameContext from '../../reducers/useGameContext';\nimport useGameState from '../reducers/useGameState';\nimport { getWinner } from '../utils/winner';\nimport MessageBanner from './MessageBanner';\nimport Turn from './Turn';\nimport WaitingForOtherPlayer from './WaitingForOtherPlayer';\n\nexport default function GameHeader() {\n  const [{ gameType, opponentId }, contextDispatcher] = useGameContext();\n  const [state, stateDispatcher] = useGameState();\n\n  useEffect(() => {\n    const winner = getWinner(state);\n    if (winner) {\n      contextDispatcher({ type: 'set_winner', value: winner });\n      stateDispatcher({ type: 'gameover', value: winner });\n    }\n  }, [state.moves]);\n\n  return (\n    <div className=\"pill turnContainer\">\n      {gameType === 'p2p_internet' && opponentId === null && (\n        <WaitingForOtherPlayer />\n      )}\n      {state.message == null && <Turn />}\n      {state.message != null && <MessageBanner message={state.message} />}\n    </div>\n  );\n}\n","const MAX_BOARD_SIZE = 700;\nconst HEADER_SIZE = 120;\nconst SIDE_BUTTONS_SIZE = 200;\nconst FIXED_BOTTOM_SIZE = 60;\nconst HORIZ_PADDING = 20;\n\nexport function getBoardSizeProps(): [number, boolean] /* size, isPotrait */ {\n  const width = window.innerWidth;\n  const height = window.innerHeight;\n\n  const maxBoardSizeIfPotrait = Math.min(\n    height - FIXED_BOTTOM_SIZE - HEADER_SIZE,\n    width - HORIZ_PADDING\n  );\n  const maxBoardSizeIfLandscape = Math.min(\n    height - HEADER_SIZE,\n    width - SIDE_BUTTONS_SIZE\n  );\n\n  return [\n    Math.min(\n      Math.max(maxBoardSizeIfPotrait, maxBoardSizeIfLandscape),\n      MAX_BOARD_SIZE\n    ),\n    maxBoardSizeIfLandscape <= maxBoardSizeIfPotrait,\n  ];\n}\n","import '../styles/Game.css';\n\nimport React, { useEffect, useState } from 'react';\n\nimport useGameContext from '../reducers/useGameContext';\nimport BoardContainer from './BoardContainer';\nimport Debug from './Debug';\nimport GameInfoAndButtons from './GameStatus/GameInfoAndButtons';\nimport GameHeader from './Header/GameHeader';\nimport useGameState from './reducers/useGameState';\nimport { getBoardSizeProps } from './utils/getBoardSizeProps';\nimport useInitializeStates from './utils/useInitializeStates';\n\nexport default function Game() {\n  const [[size, isPotrait], setSizeProps] = useState(getBoardSizeProps());\n  const stateDispatch = useGameState()[1];\n  const { debug } = useGameContext()[0];\n\n  useInitializeStates(stateDispatch);\n\n  useEffect(() => {\n    function handleResize() {\n      setSizeProps(getBoardSizeProps());\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  return (\n    <div className=\"gameContainer\">\n      <div className=\"content\">\n        <div>\n          {debug && <Debug />}\n          <GameHeader />\n          <BoardContainer boardSize={size} />\n        </div>\n        <GameInfoAndButtons fixed={isPotrait} />\n      </div>\n    </div>\n  );\n}\n","import { Dispatch, useEffect } from 'react';\nimport { useLoaderData, useLocation, useNavigate } from 'react-router-dom';\n\nimport { GameStateActions } from '../../common/types';\nimport useGameContext from '../../reducers/useGameContext';\n\nexport default function useInitializeStates(\n  stateDispatch: Dispatch<GameStateActions>\n) {\n  // @ts-ignore\n  const loaderData: ResumeGameData = useLoaderData();\n  const [gameContext, dispatch] = useGameContext();\n  const { state } = useLocation();\n\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (loaderData == null && state == null) {\n      navigate('/');\n      return;\n    }\n\n    if (state.gameHash == gameContext.gameHash) {\n      return;\n    }\n\n    switch (loaderData?.gameType || state?.gameType) {\n      case 'p2p_internet': {\n        dispatch({\n          type: 'new_game',\n          ...loaderData,\n        });\n        stateDispatch({ type: 'server', value: loaderData.moves });\n        return;\n      }\n      case 'bot': {\n        dispatch({\n          type: 'new_game',\n          ...state,\n        });\n        return;\n      }\n      case 'self': {\n        dispatch({\n          type: 'new_game',\n          ...state,\n        });\n        return;\n      }\n      default: {\n        console.error('not implemented!');\n      }\n    }\n  }, [loaderData, state]);\n}\n","import { GameState, MAX_GOATS, Move } from '../../common/types';\nimport { gameStateReducer } from '../reducers/gameStateReducer';\nimport { getNumberOfGoatsPlayed, isAllGoatsPlayed } from './goats';\nimport {\n    getPossibleMovesForGoats, getPossibleMovesForTiger, getPossibleMovesForTigers\n} from './possibleMoves';\nimport { getTurn } from './turn';\n\nconst GOAT_WIN_SCORE = -20;\nconst TIGER_WIN_SCORE = 20;\n\n// eslint-disable-next-line no-restricted-globals\nself.onmessage = (\n  ev: MessageEvent<{\n    type: 'best_bot_move';\n    state: GameState;\n    level: number;\n  }>\n) => {\n  if (ev.data?.type != 'best_bot_move') return;\n  const { state, level } = ev.data;\n  if (level == null) {\n    console.error('bot smartness level missing');\n    return;\n  }\n  const turn = getTurn(state);\n\n  let possibleMoves: Move[];\n  if (turn == 'tiger' /* bot is tiger */) {\n    possibleMoves = getPossibleMovesForTigers(state);\n  } /* bot is goat */ else {\n    possibleMoves = getPossibleMovesForGoats(state);\n  }\n\n  if (possibleMoves.length == 0) {\n    // eslint-disable-next-line no-restricted-globals\n    self.postMessage(null);\n    return null;\n  }\n\n  const scores = possibleMoves.map(([from, to]) => {\n    const newState = gameStateReducer(state, {\n      type: 'move_directly',\n      from,\n      to,\n    });\n    return getScore(newState, level);\n  });\n\n  let bestScore = scores[0];\n  let possibleMove = possibleMoves[0];\n  for (let i = 1; i < scores.length; i++) {\n    if (\n      (scores[i] > bestScore && turn == 'tiger') ||\n      (scores[i] < bestScore && turn == 'goat')\n    ) {\n      possibleMove = possibleMoves[i];\n      bestScore = scores[i];\n    }\n  }\n\n  // eslint-disable-next-line no-restricted-globals\n  self.postMessage(possibleMove);\n};\n\nexport function getScore(\n  state: GameState,\n  depth: number,\n  tigerRunningScore: number = GOAT_WIN_SCORE,\n  goatRunningScore: number = TIGER_WIN_SCORE\n): number {\n  const turn = getTurn(state);\n  const score = calcScoreForTiger(state);\n  if (depth == 0 || score == GOAT_WIN_SCORE || score == TIGER_WIN_SCORE) {\n    return score;\n  }\n\n  if (/* goal is -20 */ turn == 'goat') {\n    let value = TIGER_WIN_SCORE;\n    const possibleMoves = getPossibleMovesForGoats(state);\n    for (const i in possibleMoves) {\n      const newState = gameStateReducer(state, {\n        type: 'move_directly',\n        from: possibleMoves[i][0],\n        to: possibleMoves[i][1],\n      });\n      value = Math.min(\n        value,\n        getScore(newState, depth - 1, tigerRunningScore, goatRunningScore)\n      );\n      if (value < tigerRunningScore) {\n        break;\n      }\n      goatRunningScore = Math.min(goatRunningScore, value);\n    }\n    return value;\n  } /* turn is tiger, goal is +20 */ else {\n    let value = GOAT_WIN_SCORE;\n    const possibleMoves = getPossibleMovesForTigers(state);\n\n    for (const i in possibleMoves) {\n      const newState = gameStateReducer(state, {\n        type: 'move_directly',\n        from: possibleMoves[i][0],\n        to: possibleMoves[i][1],\n      });\n      value = Math.max(\n        value,\n        getScore(newState, depth - 1, tigerRunningScore, goatRunningScore)\n      );\n      if (value > goatRunningScore) {\n        break;\n      }\n      tigerRunningScore = Math.max(tigerRunningScore, value);\n    }\n    return value;\n  }\n}\n\nfunction calcScoreForTiger(state: GameState): number {\n  // if 1 tiger blocked -5\n  // if 1 goat eaten +1\n  // target score is +20 for tiger, -20 for goat\n\n  const allGoatsPlaced = isAllGoatsPlayed(state);\n  const numOfGoatsEaten = allGoatsPlaced\n    ? MAX_GOATS - state.goats.length\n    : getNumberOfGoatsPlayed(state) - state.goats.length;\n\n  let numOfTigersBlocked = state.tigers\n    .map(\n      (tiger) =>\n        getPossibleMovesForTiger(tiger, state.tigers, state.goats).length\n    )\n    .filter((possibleMoves) => possibleMoves == 0).length;\n\n  return numOfGoatsEaten - numOfTigersBlocked * 5;\n}\n","import { GameState, Move, Position } from '../../common/types';\nimport { canTigerEatGoat } from './canTigerEatGoat';\nimport { isAllGoatsPlayed } from './goats';\nimport { adjancentPositions, getAllEmptySpaces, isEmptySpace } from './validPositions';\n\nexport function getPossibleMovesForTigers({\n  tigers,\n  goats,\n}: GameState): Move[] {\n  const possibleMoves: Move[] = [];\n  tigers.forEach((from) => {\n    possibleMoves.push(...getPossibleMovesForTiger(from, tigers, goats));\n  });\n  return possibleMoves;\n}\n\nexport function getPossibleMovesForTiger(\n  from: Position,\n  tigers: Position[],\n  goats: Position[]\n): Move[] {\n  const possibleMoves: Move[] = [];\n  adjancentPositions[from].forEach((to) => {\n    if (tigers.includes(to)) return;\n    if (\n      isEmptySpace(to, goats, tigers) ||\n      canTigerEatGoat(tigers, goats, from, to) != null\n    ) {\n      possibleMoves.push([from, to]);\n    }\n  });\n  return possibleMoves;\n}\n\nexport function getPossibleMovesForGoats(state: GameState): Move[] {\n  if (isAllGoatsPlayed(state)) {\n    const possibleMoves: Move[] = [];\n    state.goats.forEach((from) => {\n      possibleMoves.push(...getPossibleMovesForGoat(from, state));\n    });\n    return possibleMoves;\n  } else {\n    return getAllEmptySpaces(state.tigers, state.goats).map((p) => [p, p]);\n  }\n}\n\nexport function getPossibleMovesForGoat(\n  from: Position,\n  state: GameState\n): Move[] {\n  const possibleMoves: Move[] = [];\n  adjancentPositions[from].forEach((to) => {\n    if (isEmptySpace(to, state.goats, state.tigers)) {\n      possibleMoves.push([from, to]);\n    }\n  });\n  return possibleMoves;\n}\n"],"names":["getDimension","canvasSize","padding","end","spacing","start","midPoint","getNearestBoardPosition","clientX","clientY","board","_getDimension","Math","min","getBoundingClientRect","width","height","clickTolerance","x","offsetLeft","y","offsetTop","i","round","j","actualX","actualY","BoardDecor","_ref","boardRef","useRef","_useGameState","useGameState","_useGameState2","_slicedToArray","state","stateDispatch","_useGameContext","useGameContext","_useGameContext2","gameContext","useEffect","gameOver","current","parentElement","onDragEnd","e","isTurn","designation","preventDefault","boardPosition","type","value","onTouchEnd","_e","changedTouches","item","onClick","selectedPiece","addEventListener","removeEventListener","moves","_jsx","alt","ref","src","GameOver","_Fragment","winner","gameType","displayText","concat","_jsxs","className","children","Link","to","replace","LeaveGame","showLeaveGame","dispatch","BoardOverlay","HIGHLIGHT_SIZE","Ghosted","element","React","style","_objectSpread","props","marginLeft","marginTop","filter","Highlight","Point","_createClass","_classCallCheck","this","useDraggablePiece","size","boardSize","position","_useState","useState","_useState2","dragging","setDragging","_useState3","_useState4","mousePos","setMousePos","floor","_useMemo","useMemo","_element$current","onDrag","onTouchMove","touches","passive","_element$current2","_element$current2$par","_element$current3","_element$current3$par","parentLeft","left","parentTop","top","GoatPiece","selected","goat","_useDraggablePiece","_useDraggablePiece2","Goat","onMouseDown","TigerPiece","highlight","tiger","pieceDragged","Tiger","onTouchStart","BoradPieces","context","_getHintHighlightPosi","hint","Set","possibleNewPosForGoats","isAllGoatsPlayed","goats","forEach","adjancentPositions","adjPos","includes","tigers","add","ARR_0_TO_24","pos","canTigerEatGoat","getHintHighlightPositions","_getHintHighlightPosi2","map","has","DebugPieceOverlay","botLevel","possibleMoves","getPossibleMovesForGoat","scores","_ref2","_ref3","from","newState","gameStateReducer","getScore","DebugInfo","v","isEmptySpace","score","getPossibleMovesForTiger","_ref4","_ref5","_ref6","backgroundColor","Board","debug","getScoredMove","level","onMove","worker","Worker","URL","onmessage","ev","data","postMessage","getTurn","getPossibleMovesForTigers","getPossibleMovesForGoats","length","random","getRandomMove","BoardContainer","contextDispatch","userId","gameHash","prevTurn","socketRef","socket","io","auth","token","onAny","event","args","console","log","onAnyOutgoing","on","err","message","once","opponentId","emit","disconnect","selectedMove","_selectedMove","setTimeout","Debug","prevState","prevContext","prop","slice","reduce","acc","GoatCounter","MAX_GOATS","getNumberOfGoatsPlayed","Hint","fixed","hintIcon","LeaveGameButton","leaveIcon","Options","disabled","settingsIcon","Replay","replayIcon","RulesButton","rulesIcon","GameInfoAndButtons","getWinner","goatHasMoves","Array","some","goatPos","isOccupied","checkIfGoatLost","tigerHasMoves","tigerPos","checkIfTigerLost","MessageBanner","IMG_SIZE","Turn","_useGameContext2$","WaitingForOtherPlayer","Loading","GameHeader","contextDispatcher","stateDispatcher","MAX_BOARD_SIZE","HEADER_SIZE","SIDE_BUTTONS_SIZE","FIXED_BOTTOM_SIZE","HORIZ_PADDING","getBoardSizeProps","window","innerWidth","innerHeight","maxBoardSizeIfPotrait","maxBoardSizeIfLandscape","max","Game","_useState2$","isPotrait","setSizeProps","loaderData","useLoaderData","useLocation","navigate","useNavigate","error","useInitializeStates","handleResize","GOAT_WIN_SCORE","TIGER_WIN_SCORE","depth","tigerRunningScore","arguments","undefined","goatRunningScore","turn","allGoatsPlaced","numOfGoatsEaten","numOfTigersBlocked","calcScoreForTiger","self","_ev$data","_ev$data2","bestScore","possibleMove","push","apply","_toConsumableArray","getAllEmptySpaces","p"],"sourceRoot":""}